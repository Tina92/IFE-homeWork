<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="application/javascript" src="three.js"></script>
    <script type="application/javascript" src="TrackballControls.js"></script>
</head>
<body>
    <canvas id="mainCanvas" width="400px" height="300px"></canvas>
</body>
<script>
    var controls;
    init();
    animate();
    function init() {
        var renderer = new THREE.WebGLRenderer({
           canvas: document.getElementById('mainCanvas'),
            antialias: true,
            precision: "highp"
        });
        renderer.setClearColor(0x666666);
        renderer.shadowMapEnabled = true;
        renderer.shadowMapSoft = true;
        var scene = new THREE.Scene();
        // 照相机
        var camera = new THREE.PerspectiveCamera(30, 4/3, 1, 90);
        camera.position.set(13, 7, 13);
        camera.lookAt(new THREE.Vector3(0, 0, 0));
        scene.add(camera);
        controls = new THREE.TrackballControls( camera );
        controls.addEventListener( 'change', () => renderer.render(scene, camera) );
        animate();
//底座
        var plane = new THREE.Mesh(new THREE.PlaneGeometry(18, 18, 18, 18),
                new THREE.MeshLambertMaterial({
                    color: 0xffff00,
                    emissive: 0xff0000
                }));
        plane.rotation.x = -Math.PI / 2;
        plane.position.y = -2.5;
        plane.receiveShadow = true;
        scene.add(plane);

// 车身
        var materials = [];
        for (var i = 0; i < 6; ++i) {
            materials.push(new THREE.MeshBasicMaterial({
                map: THREE.ImageUtils.loadTexture(  i + '.jpeg',
                        {}, function() {
                            renderer.render(scene, camera);
                        }),
                overdraw: true
            }));
        }
        var cube = new THREE.Mesh(new THREE.CubeGeometry(8, 4, 4), new THREE.MeshFaceMaterial(materials));
        cube.castShadow = true;

        scene.add(cube);

// 车轱辘
        Array(5).join('1').split('').forEach(function(v, i) {
            var torus = new THREE.Mesh(new THREE.TorusGeometry(0.8, 0.3, 18, 18), new THREE.MeshPhongMaterial({
                color: 0x777777,
                specular: 0xffff00,
                shininess: 100
            }));
            torus.position.set(i<2? 2.5 : -2.5, -1.6, Math.pow(-1, i) * 2.4);
            torus.castShadow = true;
            scene.add(torus);
        })
        // 灯光
        var light = new THREE.DirectionalLight();
        light.position.set(-12, 50, 10);
        light.target = cube;
        light.castShadow = true;

        light.shadowCameraNear = 20;
        light.shadowCameraFar = 1000;
        light.shadowCameraLeft = -500;
        light.shadowCameraRight = 5000;
        light.shadowCameraTop = 50;
        light.shadowCameraBottom = -50;
        light.shadowCameraVisible = true;

        light.shadowMapWidth = 512;
        light.shadowMapHeight = 512;
        light.shadowDarkness = 0.1;
        scene.add(light);
        renderer.render(scene, camera);
    }
    function animate() {
        requestAnimationFrame( animate );
        controls.update();
    }

</script>
</html>